<html>
<head>
    <title>Logitch</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <style>
        body{background-color: #26282e;}
        .form-control{margin-right: 10px;}
        .table-success{color:#000;}
    </style>
</head>
<body>
    <div style="padding: 10px; background-color:#36c;">
        <form class="form-inline" style="margin:0;">
            <input name="channel" class="form-control" type="text" placeholder="Channel" value="{{escape(handler.get_argument('channel', ''))}}" />
            <input name="user" class="form-control" type="text" placeholder="User" value="{{escape(handler.get_argument('user', ''))}}" />
            <button type="submit" class="btn btn-info">Search</button>
        </form>
    </div>
    <table class="table table-dark table-hover">
        <thead><tr>
            <th width="175px">Timestamp</th> 
            <th width="50px">Type</th>
            <th width="150px">User</th> 
            <th>Message</th>
        </tr></thead>
        <tbody>
            {% set log_id = handler.get_argument('log_id', None) %}
            {% for log in logs %}
                
                <tr id="log-{{log['id']}}" {%if log_id == str(log['id']) %}class="table-success"{%end%}>
                    <td><a href="/?channel={{url_escape(handler.get_argument('channel'))}}&context={{url_escape(str(log['created_at']))}}&log_id={{log['id']}}#log-{{log['id']}}"
                           title="Show context surrounding this time"
                        >
                        {{log['created_at']}}
                    </td>
                    <td>{{render_type(log['type'])}}</td>
                    <td><a href="/?channel={{url_escape(handler.get_argument('channel'))}}&user={{url_escape(log['user'])}}">
                        {{escape(log['user'])}}
                    </a></td>
                    <td>{{escape(log['message'])}}</td>
                </tr>
            {% end %}
        </tbody>
    </table>
</body>
</html>